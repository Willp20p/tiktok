<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mi TikTok Personal</title>
  <style>
    body {
      margin: 0;
      background: black;
      overflow-x: hidden;
      font-family: Arial, sans-serif;
    }
    .video-container {
      position: relative;
      height: 100vh;
      width: 100%;
      overflow: hidden;
    }
    video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .overlay {
      position: absolute;
      bottom: 20px;
      left: 20px;
      color: white;
      z-index: 10;
      text-shadow: 0 0 10px black;
    }
    .heart {
      position: absolute;
      right: 20px;
      bottom: 80px;
      font-size: 32px;
      cursor: pointer;
      color: black;
      transition: color 0.3s;
      z-index: 10;
      text-shadow: 0 0 10px black;
    }
    .heart.liked {
      color: red;
    }
  </style>
</head>
<body>

<div id="app"></div>

<script>
// Cargar videos desde videos.json
fetch('videos.json')
  .then(response => response.json())
  .then(videos => {
    const app = document.getElementById('app');

    videos.forEach((videoData, index) => {
      const container = document.createElement('div');
      container.className = 'video-container';

      const video = document.createElement('video');
      video.src = videoData.src;
      video.autoplay = index === 0; // Solo el primero autoplay
      video.muted = false;
      video.loop = false;
      video.controls = false;
      video.playsInline = true;

      const overlay = document.createElement('div');
      overlay.className = 'overlay';
      overlay.innerHTML = `<h2>${videoData.title}</h2><p>${videoData.description}</p>`;

      const heart = document.createElement('div');
      heart.className = 'heart';
      heart.innerHTML = '♥';

      heart.addEventListener('click', () => {
        heart.classList.toggle('liked');
      });

      container.appendChild(video);
      container.appendChild(overlay);
      container.appendChild(heart);
      app.appendChild(container);
    });

    // Lógica para pausar y reproducir videos según scroll
    let videosEls = document.querySelectorAll('video');
    let observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.play();
        } else {
          entry.target.pause();
          entry.target.currentTime = 0; // Reinicia cuando sale de pantalla
        }
      });
    }, { threshold: 0.8 });

    videosEls.forEach(video => observer.observe(video));
  });
</script>

</body>
</html>
